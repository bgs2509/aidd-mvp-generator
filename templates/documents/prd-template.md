---
# === YAML Frontmatter (машиночитаемые метаданные) ===
# Заполняется автоматически при создании артефакта

feature_id: "{FID}"                    # F001, F002, ... (автогенерация)
feature_name: "{slug}"                 # kebab-case, ≤30 символов
title: "{Название проекта/фичи}"
created: "{YYYY-MM-DD}"                # Дата создания
author: "AI (Analyst)"
type: "prd"
status: "PRD_READY"                    # Draft → PRD_READY
version: 1
mode: "{CREATE|FEATURE}"

# Опционально (заполняется по мере работы)
related_features: []                   # [F001, F003] — связанные фичи
services: []                           # [booking_api, booking_data]
requirements_count: 0                  # Количество FR-* требований
---

# PRD: {Название проекта/фичи}

**Feature ID**: {FID}
**Версия**: 1.0
**Дата**: {YYYY-MM-DD}
**Автор**: AI Agent (Аналитик)
**Статус**: Draft | Review | Approved

---

## 1. Обзор

### 1.1 Проблема

{Описание проблемы, которую решает проект/фича}

- Какую боль испытывает пользователь?
- Почему текущее решение неудовлетворительно?
- Какие последствия нерешённой проблемы?

### 1.2 Решение

{Краткое описание предлагаемого решения}

- Как решение устраняет проблему?
- Ключевые компоненты решения
- Ожидаемый результат

### 1.3 Целевая аудитория

| Сегмент | Описание | Потребности |
|---------|----------|-------------|
| {Сегмент 1} | {Описание} | {Что им нужно} |
| {Сегмент 2} | {Описание} | {Что им нужно} |

### 1.4 Ценностное предложение

{Почему пользователь выберет это решение}

---

## 2. Функциональные требования

### 2.1 Core Features (Must Have)

| ID | Название | Описание | Критерий приёмки |
|----|----------|----------|------------------|
| FR-001 | {Название} | {Детальное описание функции} | {Как проверить, что реализовано} |
| FR-002 | {Название} | {Детальное описание функции} | {Как проверить, что реализовано} |
| FR-003 | {Название} | {Детальное описание функции} | {Как проверить, что реализовано} |

### 2.2 Important Features (Should Have)

| ID | Название | Описание | Критерий приёмки |
|----|----------|----------|------------------|
| FR-010 | {Название} | {Детальное описание функции} | {Как проверить, что реализовано} |
| FR-011 | {Название} | {Детальное описание функции} | {Как проверить, что реализовано} |

### 2.3 Nice to Have (Could Have)

| ID | Название | Описание | Критерий приёмки |
|----|----------|----------|------------------|
| FR-020 | {Название} | {Детальное описание функции} | {Как проверить, что реализовано} |

---

## 3. User Stories

### US-001: {Название истории}

**Как** {роль пользователя}
**Я хочу** {действие}
**Чтобы** {цель/выгода}

**Критерии приёмки:**
- [ ] {Критерий 1}
- [ ] {Критерий 2}
- [ ] {Критерий 3}

**Связанные требования:** FR-001, FR-002

---

### US-002: {Название истории}

**Как** {роль пользователя}
**Я хочу** {действие}
**Чтобы** {цель/выгода}

**Критерии приёмки:**
- [ ] {Критерий 1}
- [ ] {Критерий 2}

**Связанные требования:** FR-003

---

## 4. UI/UX требования

### 4.1 Экраны и интерфейсы

| ID | Экран | Описание | Приоритет |
|----|-------|----------|-----------|
| UI-001 | {Название экрана} | {Описание назначения и ключевых элементов} | Must |
| UI-002 | {Название экрана} | {Описание назначения и ключевых элементов} | Should |

### 4.2 User Flows

**Flow 1: {Название}**

```
[Начало] → [Шаг 1] → [Шаг 2] → [Решение?]
                                    ↓ Да
                              [Шаг 3] → [Конец]
                                    ↓ Нет
                              [Альтернатива]
```

### 4.3 Требования к доступности

- [ ] Поддержка клавиатурной навигации
- [ ] Контрастность текста ≥ 4.5:1
- [ ] Alt-тексты для изображений
- [ ] Поддержка screen readers

---

## 5. Нефункциональные требования

### 5.1 Производительность

| ID | Метрика | Требование | Измерение |
|----|---------|------------|-----------|
| NF-001 | Время отклика API | < 200ms (p95) | Prometheus metrics |
| NF-002 | Время загрузки страницы | < 3s | Lighthouse |
| NF-003 | Throughput | > 100 RPS | Load testing |

### 5.2 Масштабируемость

| ID | Требование | Описание |
|----|------------|----------|
| NF-010 | Горизонтальное масштабирование | {Описание} |
| NF-011 | Ожидаемая нагрузка | {X пользователей, Y запросов} |

### 5.3 Безопасность

| ID | Требование | Описание |
|----|------------|----------|
| NF-020 | Аутентификация | {JWT/OAuth2/etc} |
| NF-021 | Авторизация | {RBAC/ABAC/etc} |
| NF-022 | Шифрование | {TLS 1.3, данные at rest} |
| NF-023 | Логирование | {Аудит действий} |

### 5.4 Надёжность

| ID | Метрика | Требование |
|----|---------|------------|
| NF-030 | Uptime | ≥ 99.9% |
| NF-031 | RTO | < 1 час |
| NF-032 | RPO | < 15 минут |

---

## 6. Технические ограничения

### 6.1 Обязательные технологии

- **Backend**: Python 3.11+, FastAPI
- **Database**: PostgreSQL 15+
- **Cache**: Redis 7+
- **Container**: Docker, Docker Compose
- **CI/CD**: GitHub Actions

### 6.2 Интеграции

| Система | Тип интеграции | Описание |
|---------|---------------|----------|
| {Система 1} | REST API | {Описание} |
| {Система 2} | Webhook | {Описание} |

### 6.3 Ограничения

- {Ограничение 1: описание и причина}
- {Ограничение 2: описание и причина}

---

## 7. Допущения и риски

### 7.1 Допущения

| # | Допущение | Влияние если неверно |
|---|-----------|---------------------|
| 1 | {Допущение} | {Последствия} |
| 2 | {Допущение} | {Последствия} |

### 7.2 Риски

| # | Риск | Вероятность | Влияние | Митигация |
|---|------|-------------|---------|-----------|
| 1 | {Риск} | High/Med/Low | High/Med/Low | {Как снизить} |
| 2 | {Риск} | High/Med/Low | High/Med/Low | {Как снизить} |

---

## 8. Открытые вопросы

| # | Вопрос | Статус | Ответственный | Решение |
|---|--------|--------|--------------|---------|
| 1 | {Вопрос} | Open | {Имя} | — |
| 2 | {Вопрос} | Resolved | {Имя} | {Решение} |

---

## 9. Глоссарий

| Термин | Определение |
|--------|-------------|
| {Термин 1} | {Определение} |
| {Термин 2} | {Определение} |

---

## 10. История изменений

| Версия | Дата | Автор | Изменения |
|--------|------|-------|-----------|
| 1.0 | {YYYY-MM-DD} | AI Analyst | Первоначальная версия |

---

## Качественные ворота

### PRD_READY Checklist

- [ ] Все секции заполнены
- [ ] Требования имеют уникальные ID (FR-*, NF-*, UI-*)
- [ ] Критерии приёмки определены для каждого требования
- [ ] User stories связаны с требованиями
- [ ] Нет блокирующих открытых вопросов
- [ ] Риски идентифицированы и имеют план митигации
- [ ] Документ согласован с заинтересованными сторонами
