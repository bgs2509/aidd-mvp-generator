---
# === YAML Frontmatter (машиночитаемые метаданные) ===
feature_id: "{FID}"
feature_name: "{slug}"
title: "QA Report: {Название проекта/фичи}"
created: "{YYYY-MM-DD}"
author: "AI (QA)"
type: "qa"
status: "QA_PASSED"                    # Draft → QA_PASSED | QA_FAILED
version: 1

# Ссылки на связанные артефакты
prd_ref: "prd/{YYYY-MM-DD}_{FID}_{slug}-prd.md"
review_ref: "reports/review/{YYYY-MM-DD}_{FID}_{slug}-review.md"

# Результаты тестирования
tests:
  total: 0
  passed: 0
  failed: 0
  skipped: 0
coverage_percent: 0
bugs_count:
  critical: 0
  major: 0
  minor: 0
---

# QA Report: {Название проекта/фичи}

**Feature ID**: {FID}
**Версия**: 1.0
**Дата тестирования**: {YYYY-MM-DD}
**Автор**: AI Agent (QA)
**Статус**: Passed | Passed with Issues | Failed

---

## 1. Сводка тестирования

### 1.1 Общие результаты

| Метрика | Значение | Целевое | Статус |
|---------|----------|---------|--------|
| Всего тестов | {N} | — | — |
| Пройдено | {N} | — | ✅ |
| Не пройдено | {N} | 0 | ✅/❌ |
| Пропущено | {N} | — | — |
| Coverage (avg) | {XX}% | ≥ 75% | ✅/❌ |
| Critical bugs | {N} | 0 | ✅/❌ |
| Major bugs | {N} | ≤ 3 | ✅/❌ |

### 1.2 Покрытие по сервисам

| Сервис | Unit | Integration | Coverage | Статус |
|--------|------|-------------|----------|--------|
| {context}_api | {N}/{M} | {N}/{M} | {XX}% | ✅/❌ |
| {context}_data | {N}/{M} | {N}/{M} | {XX}% | ✅/❌ |
| {context}_bot | {N}/{M} | {N}/{M} | {XX}% | ✅/❌ |

---

## 2. Unit тесты

### 2.1 Результаты по модулям

| Модуль | Тестов | Пройдено | Не пройдено | Coverage |
|--------|--------|----------|-------------|----------|
| api/v1 | {N} | {N} | {N} | {XX}% |
| application/services | {N} | {N} | {N} | {XX}% |
| domain/entities | {N} | {N} | {N} | {XX}% |
| repositories | {N} | {N} | {N} | {XX}% |

### 2.2 Непройденные тесты

| Тест | Модуль | Ошибка | Приоритет |
|------|--------|--------|-----------|
| test_{name} | {module} | {краткое описание} | High/Med/Low |

### 2.3 Детали непройденных тестов

#### UNIT-001: test_{name}

**Файл**: `tests/unit/test_{module}.py`
**Функция**: `test_{name}`

**Ожидаемое поведение**:
{Что должен проверять тест}

**Фактический результат**:
```
{Traceback или вывод}
```

**Анализ**:
{Причина падения — баг в коде или в тесте}

**Рекомендация**:
{Как исправить}

---

## 3. Integration тесты

### 3.1 Тестовое окружение

| Компонент | Версия | Конфигурация |
|-----------|--------|--------------|
| PostgreSQL | 15 | Testcontainers |
| Redis | 7 | Testcontainers |
| Services | — | Docker Compose |

### 3.2 Результаты

| Сценарий | Статус | Время |
|----------|--------|-------|
| {Сценарий 1} | ✅/❌ | {X}ms |
| {Сценарий 2} | ✅/❌ | {X}ms |
| {Сценарий 3} | ✅/❌ | {X}ms |

### 3.3 Непройденные интеграционные тесты

#### INT-001: {Название сценария}

**Описание сценария**:
{Что проверяется}

**Шаги**:
1. {Шаг 1}
2. {Шаг 2}
3. {Шаг 3}

**Ожидаемый результат**:
{Что должно произойти}

**Фактический результат**:
{Что произошло}

**Логи**:
```
{Релевантные логи}
```

---

## 4. API тестирование

### 4.1 Endpoints coverage

| Endpoint | Method | Happy Path | Error Cases | Edge Cases |
|----------|--------|------------|-------------|------------|
| /api/v1/{entities} | GET | ✅/❌ | ✅/❌ | ✅/❌ |
| /api/v1/{entities} | POST | ✅/❌ | ✅/❌ | ✅/❌ |
| /api/v1/{entities}/{id} | GET | ✅/❌ | ✅/❌ | ✅/❌ |
| /api/v1/{entities}/{id} | PUT | ✅/❌ | ✅/❌ | ✅/❌ |
| /api/v1/{entities}/{id} | DELETE | ✅/❌ | ✅/❌ | ✅/❌ |

### 4.2 Contract validation

| Endpoint | Request Schema | Response Schema | Status Codes |
|----------|---------------|-----------------|--------------|
| POST /entities | ✅/❌ | ✅/❌ | ✅/❌ |
| GET /entities/{id} | N/A | ✅/❌ | ✅/❌ |

---

## 5. Тестирование требований

### 5.1 Функциональные требования

| ID | Требование | Тест | Статус | Комментарий |
|----|------------|------|--------|-------------|
| FR-001 | {Название} | test_{name} | ✅/❌ | {Комментарий} |
| FR-002 | {Название} | test_{name} | ✅/❌ | {Комментарий} |
| FR-003 | {Название} | test_{name} | ✅/❌ | {Комментарий} |

### 5.2 Нефункциональные требования

| ID | Требование | Метрика | Результат | Статус |
|----|------------|---------|-----------|--------|
| NF-001 | Response time < 200ms | p95 = {X}ms | {Y}ms | ✅/❌ |
| NF-002 | Throughput > 100 RPS | — | {Y} RPS | ✅/❌ |

---

## 6. Performance тестирование

### 6.1 Load test results

| Endpoint | Users | RPS | Avg Latency | p95 | Errors |
|----------|-------|-----|-------------|-----|--------|
| GET /entities | 10 | {X} | {Y}ms | {Z}ms | {N}% |
| POST /entities | 10 | {X} | {Y}ms | {Z}ms | {N}% |

### 6.2 Stress test results

| Метрика | Peak Load | Результат |
|---------|-----------|-----------|
| Max RPS | {X} | {Y} |
| Breaking point | {X} users | {описание} |
| Recovery time | — | {X}s |

---

## 7. Обнаруженные дефекты

### 7.1 Критические (блокируют релиз)

| ID | Название | Компонент | Воспроизведение |
|----|----------|-----------|-----------------|
| BUG-001 | {Название} | {Компонент} | {Шаги} |

### 7.2 Важные (должны быть исправлены)

| ID | Название | Компонент | Воспроизведение |
|----|----------|-----------|-----------------|
| BUG-010 | {Название} | {Компонент} | {Шаги} |

### 7.3 Незначительные (могут быть отложены)

| ID | Название | Компонент | Воспроизведение |
|----|----------|-----------|-----------------|
| BUG-020 | {Название} | {Компонент} | {Шаги} |

---

## 8. Детали дефектов

### BUG-001: {Название}

**Приоритет**: Critical
**Компонент**: {Компонент}
**Требование**: {FR-XXX}

**Описание**:
{Детальное описание бага}

**Шаги воспроизведения**:
1. {Шаг 1}
2. {Шаг 2}
3. {Шаг 3}

**Ожидаемый результат**:
{Что должно происходить}

**Фактический результат**:
{Что происходит}

**Скриншоты/Логи**:
```
{Логи или описание скриншота}
```

**Окружение**:
- OS: {OS}
- Python: {Version}
- Database: {Version}

---

## 9. Рекомендации

### 9.1 Для релиза

- [ ] Исправить критические баги: BUG-001, ...
- [ ] Исправить важные баги: BUG-010, ...
- [ ] Достичь coverage ≥ 75% для {сервис}

### 9.2 Технический долг

1. {Улучшение тестового покрытия}
2. {Добавить edge case тесты}
3. {Оптимизировать медленные тесты}

---

## 10. Заключение

**Итоговый статус**: {Passed | Passed with Issues | Failed}

**Готовность к релизу**: {Да | Нет | С условиями}

**Условия для релиза**:
- {Условие 1}
- {Условие 2}

---

## Качественные ворота

### QA_PASSED Checklist

- [ ] Все unit тесты проходят
- [ ] Coverage ≥ 75%
- [ ] Integration тесты проходят
- [ ] Нет критических багов
- [ ] Все FR требования протестированы
- [ ] Performance соответствует NF требованиям
