---
allowed-tools: Read(*), Glob(*), Grep(*), Edit(**), Write(**), Bash(make :*), Bash(docker :*), Bash(pytest :*)
description: Генерация кода на основе утверждённого плана
---

# Команда: /generate

> Запускает Реализатора для генерации кода.

---

## Синтаксис

```bash
/generate
```

---

## Описание

Команда `/generate` создаёт код на основе утверждённого плана:
- Инфраструктуру (Docker, CI/CD)
- Data Services
- Business Services
- Тесты

---

## Агент

**Реализатор** (`.claude/agents/implementer.md`)

---

## Режимы

| Режим | Поведение |
|-------|-----------|
| **CREATE** | Создаёт полную структуру проекта |
| **FEATURE** | Добавляет код в существующий проект |

---

## Предусловия

| Ворота | Требование |
|--------|------------|
| `PLAN_APPROVED` | План утверждён пользователем |

### Алгоритм проверки

```
1. Проверить существование .pipeline-state.json
2. Если файл отсутствует:
   ❌ Пайплайн не инициализирован
   → Сначала выполните /idea
3. Проверить gates.PLAN_APPROVED.passed == true
4. Если ворота не пройдены:
   ❌ Ворота PLAN_APPROVED не пройдены
   → Сначала выполните /plan или /feature-plan
5. Проверить gates.PLAN_APPROVED.approved_by != null
6. Если план не утверждён пользователем:
   ⚠️ План требует явного утверждения пользователем
7. Продолжить выполнение
```

---

## Выходные артефакты (в целевом проекте)

| Артефакт | Путь |
|----------|------|
| Сервисы | `services/{name}_api/`, `services/{name}_data/` |
| Инфраструктура | `docker-compose.yml`, `Makefile` |
| CI/CD | `.github/workflows/` |
| Тесты | `services/*/tests/` |
| Состояние | `.pipeline-state.json` (обновляется) |

---

## Качественные ворота

### IMPLEMENT_OK

| Критерий | Описание |
|----------|----------|
| Код | Написан согласно плану |
| Структура | DDD/Hexagonal соблюдена |
| Типы | Type hints везде |
| Документация | Docstrings на русском |
| Тесты | Unit-тесты проходят |

---

## Порядок генерации

```
1. Инфраструктура (docker-compose, Makefile, CI/CD)
2. Data Service (модели, репозитории, API)
3. Business API (сервисы, API, HTTP клиенты)
4. Background Worker (если нужен)
5. Telegram Bot (если нужен)
6. Тесты
```

---

## Примеры использования

```bash
# После утверждения плана
/generate
```

---

## Следующий шаг

После прохождения ворот `IMPLEMENT_OK`:

```bash
/review
```
