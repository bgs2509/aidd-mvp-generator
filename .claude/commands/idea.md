---
allowed-tools: Read(*), Glob(*), Grep(*), Edit(**/*.md), Write(**/*.md), Bash(mkdir :*)
argument-hint: "[описание идеи проекта или фичи]"
description: Создать PRD документ из идеи пользователя
---

# Команда: /idea

> Запускает Аналитика для создания PRD документа из идеи.

---

## Синтаксис

```bash
/idea "Описание идеи проекта или фичи"
```

---

## Описание

Команда `/idea` — точка входа в пайплайн AIDD-MVP. Преобразует текстовое
описание идеи в структурированный PRD (Product Requirements Document).

---

## Агент

**Аналитик** (`.claude/agents/analyst.md`)

---

## Bootstrap: Инициализация структуры

При первом запуске `/idea` в новой директории:

```bash
# 1. Определить режим
if [ -d "services" ] || [ -f "docker-compose.yml" ]; then
    MODE="FEATURE"
else
    MODE="CREATE"
fi

# 2. Создать структуру артефактов (если не существует)
mkdir -p ai-docs/docs/{prd,architecture,plans,reports}

# 3. Инициализировать состояние пайплайна (если не существует)
if [ ! -f ".pipeline-state.json" ]; then
    echo '{"project_name":"","mode":"'$MODE'","current_stage":1,"gates":{}}' > .pipeline-state.json
fi
```

---

## Режимы

| Режим | Условие | Поведение |
|-------|---------|-----------|
| **CREATE** | Нет `services/` или `docker-compose.yml` | Создаёт полный PRD для нового MVP |
| **FEATURE** | Есть существующий код | Создаёт FEATURE_PRD для новой функции |

---

## Предусловия

Нет — это первый этап пайплайна.

---

## Выходные артефакты (в целевом проекте)

| Артефакт | Путь |
|----------|------|
| PRD документ | `ai-docs/docs/prd/{name}-prd.md` |
| Состояние | `.pipeline-state.json` |

---

## Качественные ворота

### PRD_READY

| Критерий | Описание |
|----------|----------|
| Все секции | PRD полностью заполнен |
| ID требований | Каждое требование имеет уникальный ID |
| Приоритеты | Must/Should/Could для всех требований |
| Критерии приёмки | Определены для всех FR |
| Открытые вопросы | Нет блокирующих вопросов |
| Состояние | `.pipeline-state.json` обновлён |

---

## Примеры использования

### Создание нового MVP

```bash
/idea "Создать сервис бронирования столиков в ресторанах.
Пользователи могут искать рестораны по кухне и локации,
смотреть свободные столики и бронировать на нужное время.
Рестораны получают уведомления о бронях в Telegram."
```

### Добавление фичи

```bash
/idea "Добавить систему email-уведомлений для подтверждения бронирования
и напоминания за 2 часа до визита."
```

### Краткое описание

```bash
/idea "Сервис учёта личных финансов с категоризацией расходов"
```

---

## Следующий шаг

После прохождения ворот `PRD_READY`:

```bash
/research
```
