# Функция: Сбор требований

> **Назначение**: Формализация требований из идеи пользователя.

---

## Цель

Преобразовать верифицированную идею в структурированный набор
функциональных, нефункциональных и UI/UX требований.

---

## Типы требований

### Функциональные требования (FR-*)

**Что система должна делать.**

```
FR-{NNN}: {Краткое название}
Описание: {Детальное описание функции}
Приоритет: Must | Should | Could
Критерий приёмки: {Как проверить, что требование выполнено}
```

**Примеры**:
```
FR-001: Поиск ресторанов
Описание: Пользователь может искать рестораны по названию, типу кухни и локации
Приоритет: Must
Критерий приёмки: Поиск возвращает релевантные результаты за <2 секунды
```

### Нефункциональные требования (NF-*)

**Как система должна работать.**

```
NF-{NNN}: {Краткое название}
Описание: {Требование к качеству/производительности}
Метрика: {Измеримый показатель}
```

**Примеры**:
```
NF-001: Время отклика API
Описание: API должен отвечать быстро
Метрика: 95-й перцентиль < 500ms
```

### UI/UX требования (UI-*)

**Интерфейсные требования.**

```
UI-{NNN}: {Краткое название}
Описание: {Требование к интерфейсу}
Приоритет: Must | Should | Could
```

**Примеры**:
```
UI-001: Отображение списка ресторанов
Описание: Результаты поиска отображаются карточками с фото, названием, рейтингом
Приоритет: Must
```

### Точки интеграции (INT-*)

**Где система взаимодействует с другими компонентами.**

```
INT-{NNN}: {Краткое название}
От: {Сервис-источник}
К: {Сервис/Система-получатель}
Протокол: HTTP/REST | Webhook | gRPC | Event Bus
Описание: {Контракт, данные, обработка ошибок}
```

**Примеры**:
```
INT-001: Business API → Data API
От: booking_api
К: booking_data
Протокол: HTTP/REST
Описание: CRUD операции с бронированиями, JSON, retry при 5xx

INT-002: Bot → Business API
От: booking_bot
К: booking_api
Протокол: HTTP/REST
Описание: Команды бота, JSON, timeout 30s

INT-003: Worker → External Service
От: notification_worker
К: Telegram API
Протокол: HTTP/REST
Описание: Отправка уведомлений, exponential backoff при ошибках
```

---

## Приоритизация (MoSCoW)

| Приоритет | Описание | Для MVP |
|-----------|----------|---------|
| **Must** | Обязательно для MVP | Да |
| **Should** | Важно, но не критично | Частично |
| **Could** | Желательно, если время есть | Нет |
| **Won't** | Не в этом релизе | Нет |

Для **Level 2 (MVP)** включаем:
- Все **Must** требования
- Основные **Should** требования

---

## Процесс сбора

### Шаг 1: Выделение функций

```
Из описания идеи выделить:
1. Основные действия пользователей
2. Объекты данных
3. Взаимодействия между объектами
```

### Шаг 2: Формулирование FR

```
Для каждого действия:
- Сформулировать FR-{NNN}
- Определить приоритет
- Описать критерий приёмки
```

### Шаг 3: Определение NF

```
Стандартные NF для MVP:
- NF-001: Время отклика API (<500ms)
- NF-002: Доступность (99%)
- NF-003: Покрытие тестами (≥75%)
```

### Шаг 4: Определение UI

```
Для каждого экрана/команды:
- Сформулировать UI-{NNN}
- Определить приоритет
```

---

## Шаблон таблицы требований

### Функциональные требования

| ID | Название | Описание | Приоритет | Критерий приёмки |
|----|----------|----------|-----------|------------------|
| FR-001 | | | Must/Should/Could | |
| FR-002 | | | | |

### Нефункциональные требования

| ID | Название | Описание | Метрика |
|----|----------|----------|---------|
| NF-001 | Время отклика | API отвечает быстро | 95p < 500ms |
| NF-002 | Доступность | Система доступна | 99% uptime |
| NF-003 | Покрытие тестами | Код покрыт тестами | ≥75% |

### UI/UX требования

| ID | Название | Описание | Приоритет |
|----|----------|----------|-----------|
| UI-001 | | | Must/Should/Could |

---

## Чек-лист сбора требований

- [ ] Все основные функции описаны (FR-*)
- [ ] Каждое FR имеет критерий приёмки
- [ ] Приоритеты расставлены
- [ ] NF требования определены
- [ ] UI требования определены (если применимо)
- [ ] Нет дублирующихся требований
- [ ] Требования атомарные (одно требование = одна функция)

---

## Источники

| Документ | Описание |
|----------|----------|
| `.ai-framework/docs/guides/prompt-templates.md` | Шаблоны промптов |
| `.ai-framework/docs/templates/requirements-intake-template.md` | Шаблон требований |
